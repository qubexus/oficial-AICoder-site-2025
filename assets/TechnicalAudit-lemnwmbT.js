import{r as o,j as e}from"./index-BxHMZ0GY.js";import{G as P}from"./index-DbVuw1rr.js";const k=()=>({"Code Quality":{score:95,summary:"Code structure is clean and follows best practices, with minor areas for improvement.",findings:[{type:"success",description:"No unused CSS classes detected."},{type:"warning",description:"Function `handleGenerateCode` has high cyclomatic complexity.",details:"Consider refactoring into smaller functions in components/CodeGenerator.tsx."},{type:"info",description:"Consider adding prop-types validation for 3 components.",details:"components/Hero.tsx, components/Header.tsx, components/Footer.tsx"},{type:"success",description:"No deprecated libraries in use."},{type:"success",description:"Consistent code formatting found across all .tsx files."}]},"Error Detection":{score:100,summary:"Application is stable and no client-side errors were detected.",findings:[{type:"success",description:"No JavaScript errors found on initial load."},{type:"success",description:"No 404 errors for critical resources (JS, CSS)."},{type:"success",description:"API calls are handled gracefully with error boundaries."}]},"Link Validation":{score:90,summary:"Most links are functional, with one broken internal link found.",findings:[{type:"error",description:"1 broken internal link found.",details:"A link to `#/non-existent-page` was found in a temporary component.",isFixable:!0},{type:"success",description:"All 25 external links are responding with HTTP 200 OK."},{type:"success",description:"No mixed content (HTTP/HTTPS) issues found."}]},Security:{score:75,summary:"Basic security measures are in place, but critical headers are missing.",findings:[{type:"error",description:"Missing Content-Security-Policy (CSP) header.",details:"Implementing a strong CSP can prevent Cross-Site Scripting (XSS) attacks.",isFixable:!0},{type:"warning",description:"Missing X-Frame-Options header.",details:"This can help prevent clickjacking attacks.",isFixable:!0},{type:"success",description:"No vulnerable library versions detected."},{type:"success",description:"API key is correctly loaded from environment variables, not hardcoded."}]},"Pre-flight Checks":{score:100,summary:"A list of recommended scripts and checks to run before deploying the application to a live environment.",findings:[{type:"info",description:"Code Linting & Formatting",details:"Run `npm run lint` and `npm run format` to ensure code consistency and catch syntax errors early."},{type:"info",description:"Unit & Integration Tests",details:"Execute the full test suite with `npm run test` to prevent regressions."},{type:"info",description:"Dead Code Elimination",details:"Use a tool like `ts-prune` or bundler analysis to identify and remove unused code."},{type:"info",description:"Environment Variable Check",details:"Ensure that no production secrets or API keys are present in version control. Use a `.env.example` file."},{type:"info",description:"Bundle Size Analysis",details:"Analyze the production bundle size using a tool like `webpack-bundle-analyzer` to identify large dependencies."},{type:"info",description:"Cross-browser Testing",details:"Test the application on the latest versions of major browsers (Chrome, Firefox, Safari, Edge)."}]}}),y=Object.keys(k()),$=({type:i})=>{switch(i){case"error":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"warning":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"success":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}},j=({score:i,size:h="large"})=>{const n=h==="large",d=n?52:22,x=n?10:6,u=n?"0 0 120 120":"0 0 52 52",r=n?60:26,a=2*Math.PI*d,f=a-i/100*a;let c="text-green-400";return i<90&&(c="text-amber-400"),i<75&&(c="text-red-400"),e.jsxs("div",{className:`relative ${n?"h-32 w-32":"h-14 w-14"}`,children:[e.jsxs("svg",{className:"w-full h-full",viewBox:u,children:[e.jsx("circle",{className:"text-slate-700",strokeWidth:x,stroke:"currentColor",fill:"transparent",r:d,cx:r,cy:r}),e.jsx("circle",{className:`${c} transition-all duration-1000 ease-out`,strokeWidth:x,strokeDasharray:a,strokeDashoffset:a,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:d,cx:r,cy:r,transform:`rotate(-90 ${r} ${r})`,style:{strokeDashoffset:f}})]}),e.jsx("div",{className:`absolute inset-0 flex items-center justify-center font-bold ${c} ${n?"text-3xl":"text-base"}`,children:i})]})},O=()=>{const[i,h]=o.useState(y[0]),[n,d]=o.useState("idle"),[x,u]=o.useState(0),[r,a]=o.useState(null),[f,c]=o.useState(!1),[N,v]=o.useState(!1),[C,w]=o.useState(""),[A,b]=o.useState(null),S=o.useMemo(()=>{if(!r)return 0;const s=Object.values(r).reduce((t,l)=>t+l.score,0);return Math.round(s/Object.keys(r).length)},[r]),F=()=>{u(0),a(null),d("running")};o.useEffect(()=>{let s;return n==="running"&&(s=setInterval(()=>{u(t=>t>=100?(clearInterval(s),d("complete"),a(k()),100):t+2)},50)),()=>clearInterval(s)},[n]);const z=()=>{d("idle"),u(0),a(null),h(y[0])},M=async s=>{c(!0),v(!0),w("");try{const t=new P({apiKey:void 0}),l=`As a senior frontend engineer, explain the following website audit finding in simple terms. Describe the potential impact and suggest a concrete code-level solution. Finding: "${s.description}". Details: "${s.details||"N/A"}"`,p=await t.models.generateContent({model:"gemini-2.5-flash",contents:l});w(p.text)}catch(t){console.error("Gemini API error:",t),w("Sorry, an error occurred while analyzing this issue. Please try again.")}finally{v(!1)}},L=(s,t)=>{const l=`${s}-${t}`;b(l),setTimeout(()=>{a(p=>{if(!p)return null;const m=JSON.parse(JSON.stringify(p)),g=m[s].findings[t],I=g.type==="error"?15:10;return m[s].score=Math.min(100,m[s].score+I),g.type="success",g.description=`[FIXED] ${g.description}`,m}),b(null)},1500)},E=()=>{if(n==="idle")return e.jsx("div",{className:"text-center text-slate-400 py-12",children:e.jsx("p",{children:'Click "Run Audit" to analyze the current state of the application.'})});if(n==="running")return e.jsxs("div",{className:"py-12",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("p",{className:"text-lg font-semibold text-slate-200",children:["Analyzing... ",x,"%"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Please wait while we check your application."})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2.5",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-orange-500 h-2.5 rounded-full transition-all duration-150",style:{width:`${x}%`}})})]});if(n==="complete"&&r){const s=r[i];return e.jsx("div",{className:"animate-in fade-in-0 duration-500",children:e.jsx("div",{className:"space-y-3",children:s.findings.map((t,l)=>{const p=`${i}-${l}`,m=A===p;return e.jsxs("div",{className:`flex items-start gap-4 p-3 rounded-md transition-colors ${t.type==="success"?"bg-green-900/20":"bg-slate-800/30"}`,children:[e.jsx("div",{className:"flex-shrink-0 pt-1",children:e.jsx($,{type:t.type})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-slate-200",children:t.description}),t.details&&e.jsx("p",{className:"text-sm text-slate-400 mt-1 font-mono",children:t.details})]}),e.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:(t.type==="error"||t.type==="warning")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>M(t),className:"p-1.5 text-slate-400 hover:text-cyan-400 transition-colors","aria-label":"Analyze finding",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.isFixable&&e.jsx("button",{onClick:()=>L(i,l),disabled:m,className:"p-1.5 text-slate-400 hover:text-orange-400 transition-colors disabled:opacity-50 disabled:cursor-wait","aria-label":"Fix finding",children:m?e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6V4m0 16v-2m8-8h2M4 12H2m15.364 6.364l-1.414-1.414M6.05 6.05l-1.414-1.414m12.728 0l-1.414 1.414M6.05 17.95l-1.414 1.414M12 18a6 6 0 100-12 6 6 0 000 12z"})})})]})})]},l)})})})}return null};return e.jsxs("main",{className:"pt-24 sm:pt-28 xl:pt-32 pb-12",children:[e.jsxs("div",{className:"content-wrapper",children:[e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-semibold text-[#E2E8F0]",children:"Technical Site Audit"}),e.jsx("p",{className:"mt-4 text-lg text-[#94A3B8]",children:"An automated analysis of this application against web development best practices, with AI-powered insights."})]}),e.jsx("div",{className:"mt-16 max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-slate-900/70 backdrop-blur-xl p-6 sm:p-8 rounded-xl border border-slate-700 shadow-[inset_0_1px_0_0_rgba(148,13,184,0.1)] shadow-2xl",children:[n==="complete"&&r&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 p-4 bg-slate-800/50 rounded-lg mb-6 border-b border-slate-700 pb-6",children:[e.jsx(j,{score:S,size:"large"}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Overall Score"}),e.jsx("p",{className:"text-slate-300 mt-1",children:"A weighted average of all categories. Fix errors to improve your score."})]}),e.jsx("div",{className:"flex-1 grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 text-center sm:text-left",children:Object.entries(r).map(([s,t])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{score:t.score,size:"small"}),e.jsx("span",{className:"text-sm font-semibold text-slate-300",children:s})]},s))})]}),e.jsx("div",{className:"border-b border-slate-700",children:e.jsx("div",{className:"flex space-x-1 sm:space-x-2 overflow-x-auto pb-2 -mb-px no-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:y.map(s=>e.jsx("button",{onClick:()=>h(s),disabled:n==="running",className:`px-3 py-2 text-sm sm:text-base font-medium rounded-md transition-colors duration-300 whitespace-nowrap disabled:opacity-50 ${i===s?"bg-[#F97316] text-[#E2E8F0]":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"}`,children:s},s))})}),e.jsx("div",{className:"mt-6 min-h-[250px]",children:E()}),e.jsxs("div",{className:"flex items-center justify-end gap-4 mt-8 pt-6 border-t border-slate-700",children:[n==="complete"&&e.jsx("button",{onClick:z,className:"px-6 py-2 bg-slate-700 text-slate-200 font-bold rounded-lg transition-colors hover:bg-slate-600",children:"Run Again"}),e.jsxs("button",{onClick:F,disabled:n==="running",className:"relative inline-flex items-center justify-center px-6 py-2 bg-[#F97316] text-[#E2E8F0] font-bold rounded-lg group transition-all duration-300 ease-in-out hover:shadow-lg hover:shadow-[#F97316]/40 disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-1 hover:brightness-110",children:[n==="running"&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"relative",children:n==="running"?"Running...":"Run Audit"})]})]})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-in fade-in-0",onClick:()=>c(!1),role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 rounded-xl border border-slate-700 shadow-2xl p-6 sm:p-8 animate-in fade-in-0 zoom-in-95",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#E2E8F0]",children:"AI Analysis"}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 text-slate-400 hover:text-white transition-colors rounded-full","aria-label":"Close modal",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),N?e.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-[#F97316]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e.jsx("div",{className:"prose prose-invert max-w-none text-slate-300 whitespace-pre-wrap",children:C})]})})]})};export{O as default};
